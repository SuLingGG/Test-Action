name: Upload & Download

on:
  workflow_dispatch:

jobs:
  Upload:
    runs-on: ubuntu-18.04
    
    steps:
    - name: Create Files
      run: |
        mkdir test && cd test
        echo 123 > 123.txt
        echo 1234 > 1234.txt
        echo 12345 > 12345.txt
        cd .. && zip -qr 123test.zip test
    
    - name: Upload Artifact
      uses: actions/upload-artifact@v2
      with:
        name: my-artifact
        path: 123test.zip

  Download:
    needs: [Upload]
    runs-on: ubuntu-18.04

    steps:
        - name: Create Folder
          run: |
            sudo apt-get upgrade && sudo apt-get install tree -y
            mkdir -p openwrt

        - name: Download Files
          uses: actions/download-artifact@v2
          id: download
          with:
            name: 'my-artifact'
            path: openwrt

        - name: Echo Download Path
          run: echo ${{steps.download.outputs.download-path}}
          
        - name: Tree
          run: |
            cd openwrt
            tree .
